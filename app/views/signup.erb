<form method="post" action="/signup">
<ul class="errors">
  <% @user.errors.full_messages.each do |error_message| %>
    <li><%= error_message %></li>
  <% end %>
</ul>  

<div class="form-group">
    <!-- label for the input with id="email" -->
    <label for="email">Email</label>
    <!-- input which will send data via params[:email] -->
    <input type="email" id="email" name="email" value="<%=@user.email %>" />
  </div>
  <div class="form-group">
    <label for="whatsup">Avatar URL</label>
    <input type="text" id="whatsup" name="avatar_url" value="<%=@user.avatar_url %>" />
  </div>
  <div class="form-group">
    <label for="username">Username</label>
    <input type="text" id="username" name="username" value="<%=@user.username%>" />
  </div>
  <div class="form-group">
    <label for="password">Password</label>
    <input type="password" id="password" name="password" value="<%=@user.password %>" />
  </div>
  <div class="form-group">
    <button type="submit">Signup</button>
  </div>
</form>

<script>
  console.log("HELLOOOOO");

  // grab the signup form
  const signupForm = document.querySelector("form");

  // listen for a "submit" event, fired by the type="submit" button
  // you can listen for all kinds of events: click, mouseover, scroll, resize... https://developer.mozilla.org/en-US/docs/Web/Events
  // when we hear the event we'll run handleSubmit, the "callback function"
  signupForm.addEventListener("submit", handleSubmit);

  // handleSubmit gets passed the "event" (since it's an event listener callback function)
  function handleSubmit(event) {
    // prevent the default action of the event (the submit to server)
    event.preventDefault();
    // look at the event's "baseURI" to find the data
    // e.g.
    const baseURI = event.baseURI;
    console.log(event);
    console.log({ baseURI });

    // make a formData object
    // pass in the html form
    const formData = new FormData(signupForm);

    // there's a couple ways to send a HTTP request, here's the simplest one
    // https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/fetch
    fetch("/signup", {
      method: "POST",
      body: formData
    });
  }
</script>
